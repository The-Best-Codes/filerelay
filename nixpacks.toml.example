# if you can't manually set these install, build, and start steps in your deployment provider (e.g. Coolify), you can use this custom nixpacks.toml.
# - install: `bun install --frozen-lockfile`
# - build: `bun run build`
# - start: `bun run start`


[phases.setup]
nixPkgs = ['bun', 'nodejs_22']
nixpkgsArchive = '12bd230118a1901a4a5d393f9f56b6ad7e571d01'
aptPkgs = ["gcc", "g++", "make", "python3"]

[phases.runtime]
nixLibs = ['gcc13.cc.lib']

[phases.install]
cmds = ['bun install --frozen-lockfile', 'npm rebuild better-sqlite3']

[phases.build]
cmds = ['bun run build']

[phases.start]
cmds = ['bun run start']
