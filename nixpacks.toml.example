# if you can't manually set these install, build, and start steps in your deployment provider (e.g. Coolify), you can use this custom nixpacks.toml.
# - install: `bun install --frozen-lockfile`
# - build: `bun run build`
# - start: `bun run start`


[phases.setup]
nixPkgs = ['bun', 'nodejs_22']
nixpkgsArchive = 'e57b3b16ad8758fd681511a078f35c416a8cc939'
aptPkgs = ["gcc", "g++", "make", "python3"]

[phases.install]
cmds = ['bun install --frozen-lockfile', 'npm rebuild better-sqlite3']

[phases.runtime]
nixLibs = ['gcc.cc.lib']
nixpkgsArchive = 'e57b3b16ad8758fd681511a078f35c416a8cc939'

[phases.build]
cmds = ['bun run build']

[phases.start]
cmds = ['bun run start']
